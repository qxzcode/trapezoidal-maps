<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="simple/simple.min.css">
    <link rel="stylesheet" href="index.css">
    <title>Trapezoidal Maps</title>
</head>

<body>
    <header>
        <h1>Where Am I?<br><small>An Explanation of Trapezoidal Maps</small></h1><br>
        <a href="algorithm.html">Algorithm</a>
        <a href="https://rit.zoom.us/rec/share/sAlCYv1eTnxbkmdkaMvhvHnH6EbT02AOw_JVs9eygQb77Jfhc4qXfZdhgS42SqBO.mkbGlf-5Il4Pm90T">Presentation</a>
        <a href="https://github.com/qxzcode/trapezoidal-maps">Source Code</a>
    </header>

    <main>
        <div class="top-controls">
            <div>
                <label for="file-input">Select a file</label>
                <select name="fileInputs" id="fileInputs"></select>
            </div>
            <div class="control-buttons-wrap">
                <button id="step_button">Start</button>
                <button id="finish_button">Finish</button>
            </div>
            <div>
                <label for="step_speed">Step speed:</label><br>
                (slow) <input type="range" id="step_speed" min="0" max="100" value="0"> (instant)
            </div>
        </div>

        <div class="row">
            <div class="column">
                <canvas id="canvas"></canvas><br><br>
            </div>
            <div class="column">
                <details id="pseudocode-collapse" open>
                    <summary><code>INSERT_SEGMENT</code> pseudocode</summary>
                    <pre id="pseudocode">
<span>INSERT_SEGMENT(Segment S, Trapezoidal Map T_MAP)</span>
<span>	let T_LIST = findTrapsCrossed(S, T_MAP)</span>
<span>	for each T in T_LIST</span>
<span>		if T.contains(S.p1) AND T.contains(S.p2)</span>
<span>			// CASE 2: this trapezoid contains both endpoints</span>
<span>			create node structure:</span>
<span>			ROOT = X_NODE(S.p1)</span>
<span>				* L -> T_NODE</span>
<span>				* R -> X_NODE(S.p2)</span>
<span>					* L -> Y_NODE(S)</span>
<span>						L -> T_NODE</span>
<span>						R -> T_NODE</span>
<span>					* R -> T_NODE</span>
<span>		else if T.contains(S.p1) OR T.contains(S.p2)</span>
<span>			// CASE 1: this trapezoid contains only one of the endpoints</span>
<span>			p = point contained in T</span>
<span>			create node structure:</span>
<span>			(assuming p is S.p1, swap L & R if p is S.p2)</span>
<span>			ROOT = X_NODE(p)</span>
<span>				* L -> T_NODE</span>
<span>				* R -> Y_NODE(S)</span>
<span>					L -> T_NODE</span>
<span>					R -> T_NODE</span>
<span>		else</span>
<span>			// CASE 3: this trapezoid doesn't contain either endpoint</span>
<span>			create node structure:</span>
<span>			ROOT = Y_NODE(S)</span>
<span>				L -> T_NODE</span>
<span>				R -> T_NODE</span>
<span>		end</span>
<span>		Place node structure at position of T in T_MAP</span>
<span>		Delete(T)</span>
<span>		MERGE_ADJACENT_TRAPEZOIDS(ROOT)</span>
<span>	end</span>
<span>end</span></pre>
                </details>
                <details id="query-collapse" aria-disabled="true">
                    <summary>Search path for the query</summary>
                    <ol id="query-node-list"></ol>
                </details>
            </div>
        </div>

        <div id="queryDiv">
            <label for="xval">X position:</label>
            <input type="number" id="xval" name="xval" min="0" max="100"><br><br>
            <label for="yval">Y position:</label>
            <input type="number" id="yval" name="yval" min="0" max="100"><br><br>
            <input type="submit" value="Submit" id="queryButton">
        </div>
        <details>
            <summary>Node adjacency table</summary>
            <table id="adjMat"></table>
        </details>
    </main>

    <footer>
        Theo Lincoln and Quinn Tucker
    </footer>

    <script type="module" src="js/index.js"></script>
    <script src="js/input_files.js"></script>
</body>

</html>
